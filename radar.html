<!doctype html>
<html>
<head>
    <title>ConnectMe - map</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="css/styles.css">
    <meta name="author" content="lithach">
    <link rel="shortcut icon" href="img/icons/logo.png">


    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>

    <!-- our own stylesheet for overrides -->
    <link rel="stylesheet" href="css/styles.css">
    <style type="text/css">
        #radarUserDetails{
            position:absolute;
            width:175px;
            height:40px;
            left:100px;
            top:100px;
            display:none;
            background-color:whitesmoke;
            padding:4px;
            color:black;     
        }
    </style>
    <script type="text/javascript" src="control.js"></script>
    <script type="text/javascript" src="data.js"></script>
    <script type="text/javascript" src="display.js"></script>
    <script type="text/javascript">
        var radarDotLocations;
        var radarView;
        function updateLocationIntervalHandler() {
            radarView.updateLocation();
        }
        window.onload = function () {            
            document.getElementById("radarCanvas").onmouseup = function (e) {
                var canvasX = document.getElementById("radarCanvas").offsetLeft;
                var canvasY = document.getElementById("radarCanvas").offsetTop;
                var x = e.x - canvasX;
                var y = e.y - canvasY;
                var found = false;
                for (var i = 0; i < radarDotLocations.length; i++) {
                    if (x > radarDotLocations[i].x - 10 && x < radarDotLocations[i].x + 10 && y > radarDotLocations[i].y - 10 && y < radarDotLocations[i].y + 10) {
                        var box = document.getElementById("radarUserDetails");
                        box.style.display = "block";
                        box.style.left = e.x + "px";
                        box.style.top = e.y + "px";
                        box.querySelector(".userName").innerHTML = radarView.nearbyUsers[i].userName;
                        box.querySelector(".userDistance").innerHTML = radarView.nearbyUsers[i].distance+"ft";
                        found = true;
                    } 
                }
                if (!found) {
                    document.getElementById("radarUserDetails").style.display = "none";
                }
            };
            radarView = new nearbyUsers(drawRadar);
            radarView.getUsersNearby();
            //radarView.updateLocation();
            radarView.updateLocation();
            setInterval("updateLocationIntervalHandler()", 10000);
        };
        

    </script>
</head>



<body>
    <div id="radarUserDetails">
        <span class="userName">name</span>
        <br />
        <span class="userDistance">dist</span>
    </div>
    <div class="search-bar">
        <div class="row">
            <div class="input-group">
                <input type="text" id="input" class="form-control" placeholder="Search">
                <span class="input-group-btn">
                    <button id="query" class="btn btn-default" type="button">
                        <span class=" glyphicon glyphicon-search" aria-hidden="true"></span>
                    </button>
                </span>
            </div>
        </div>
    </div>



    <div class="settings">
        <div class="row">
            <div class="question">
                <img class="map" src="img/icons/mapWhite.png">
            </div>
            <div class="switch">
                <input id="cmn-toggle-4" class="cmn-toggle cmn-toggle-round-flat" type="checkbox">
                <label for="cmn-toggle-4"></label>
            </div>
            <div class="question2">
                <img class="map" src="img/icons/mapWhite.png">
            </div>
        </div><!-- /row -->
    </div>
    <div id="radarCanvasDiv">
        <canvas id="radarCanvas" width="350" height="350" style="border:1px solid black;"></canvas>
    </div>

    <div class="container-fluid bottom-menu">
        <div id="navwrapper" class="row">
            <div id="innerwrapper" class="col-xs-2 col-md-2"> <a href="radar.html"><img id="navigator"  class="map" src="img/icons/mapWhite.png"></a> </div>
            <div id="innerwrapper" class="col-xs-2 col-md-2"> <a href="profile.html"><img id="navigator" class="myProfile" src="img/icons/myProfileB.png"></a> </div>
            <div  id="innerwrapper" class="col-xs-2 col-md-2"> <a href="radar.html"><img id="navigator" class="msg" src="img/icons/msgWhite.png"></a> </div>
            <div  id="innerwrapper" class="col-xs-2 col-md-2"> <a href="friendlist.html"><img id="navigator" class="friends" src="img/icons/friendsWhite.png"></a> </div>
            <div id="innerwrapper" class="col-xs-2 col-md-2"> <a href="settings.html"><img id="navigator" class="friends" src="img/icons/settingsWhite.png"></a> </div>
        <!-- last icon place holder for setting icon -->
        <div>
    </div>
</body>
</html>